<div class="snippet_set" id="snippet_set" data-locale="en-US">
  <style type="text/css">
#snippetContainer div.snippet {
  display: none;
}

#snippetContainer div.snippet img.icon {
  margin: -0.75em 1em 0 0;
  float: left;
}

  .snippet {
    position: relative;
  }

  .snippet .icon {
    position: absolute;
    right: 400px;
    top: 5px;
  }

  .snippet p {
    display: table-cell;
    height: 40px;
    padding-left: 80px;
    vertical-align: middle;
    width: 400px;
  }
</style>      <div data-snippet-id="4803" data-weight="100" class="snippet-metadata"><div class="snippet">
  <a href="about:accounts"><img class="icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0YzMThGRTU2QkI2MTFFMUEwQjVCRUVDMUY3Mjc5REQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0YzMThGRTY2QkI2MTFFMUEwQjVCRUVDMUY3Mjc5REQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3RjMxOEZFMzZCQjYxMUUxQTBCNUJFRUMxRjcyNzlERCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3RjMxOEZFNDZCQjYxMUUxQTBCNUJFRUMxRjcyNzlERCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoyXbk4AAAxiSURBVHjazFh5dNTV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" /></a>
  <p>Now that youâ€™ve made Firefox your own, take it to your smartphone, tablet and computer with Firefox Sync. <a href="about:accounts">Ready? Set? Go Sync!</a></p>
</div></div>
      <div data-snippet-id="4758" data-weight="100" class="snippet-metadata"><div class="snippet" id="mofo-eoy-fundraiser-4758">
  <style type="text/css">
      #mofo-eoy-fundraiser-4758 {
        margin: 20px auto;
        font-family: "Open Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
      }

        #mofo-eoy-fundraiser-4758 button::-moz-focus-inner {
          border: 0;
          padding: 0;
        }

        #mofo-eoy-fundraiser-4758 p {
          font-size: 14px;
          line-height: 1.5em;
          margin: 20px 0;
          display: block;
          height: auto;
          padding: 0;
          width: auto;
        }

        #mofo-eoy-fundraiser-4758 em {
          transition: background 800ms linear;
          font-style: normal;
          padding: 1px 5px;
        }

        #mofo-eoy-fundraiser-4758 em.active {
          background: rgba(173, 228, 255, 0.75);
        }

        #mofo-eoy-fundraiser-4758 .button {
          margin-top: 8px;
          padding: 5px 20px;
          text-align: center;
          text-decoration: none;
          text-transform: uppercase;
          color: rgb(255, 255, 255);
          font-family: "Open Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
          font-size: 22px;
          font-weight: 600;
          text-shadow: 0 1px 0 rgba(135, 136, 136, 0.53);
          background-color: rgb(151, 152, 152);
          background-image: linear-gradient(to top, rgba(0, 1, 1, 0.09) 0%, rgba(255, 255, 255, 0.09) 100%);
          border: 1px solid rgba(151, 152, 152, 0.9);
          border-radius: 2px;
          box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.65);
        }

        #mofo-eoy-fundraiser-4758 .button:hover {
          cursor: pointer;
        }

        #mofo-eoy-fundraiser-4758 .button:focus {
          text-decoration: underline;
          outline: 0;
        }

        #mofo-eoy-fundraiser-4758 .button-red {
          border: 1px solid rgba(230, 69, 61, 0.5);
          background-color: rgb(193, 56, 50);
          background-image: linear-gradient(to top, rgba(0, 1, 1, 0) 0%, rgba(255, 255, 255, 0) 100%);
          font-size: 18px;
          transition: background-color 400ms linear;
        }
        #mofo-eoy-fundraiser-4758 .button-red:hover {
          background-color: rgb(160, 39, 35);
        }
        #mofo-eoy-fundraiser-4758 .button-red:active {
          text-decoration: none;
        }

        #mofo-eoy-fundraiser-4758 .button-wide {
          padding: 7px 60px;
        }

        #mofo-eoy-fundraiser-4758 .button-selected {
          background: linear-gradient(rgb(75, 172, 238), rgb(2, 132, 225));
          border: 1px solid rgba(75, 172, 238, 0.9);
        }

        /* Utilities */

        #mofo-eoy-fundraiser-4758 .pull-right {
          float: right;
        }

        #mofo-eoy-fundraiser-4758 .pull-left {
          float: left;
        }

  </style>

    <p>Mozilla, the non-profit behind Firefox, relies on grants and donations from people like you. <em>If everyone reading this donates a few dollars, we can be fully funded for another year.</em></p>

    <div class="donation-amounts pull-left">
      <button class="button button-selected" data-amount="10">$10</button>
      <button class="button" data-amount="5">$5</button>
      <button class="button" data-amount="3">$3</button>
    </div>

    <a class="button button-red button-wide pull-right donate-button" href="https://sendto.mozilla.org/page/contribute/givenow-seq?ref=EOYFR2014&amp;utm_campaign=EOYFR2014&amp;utm_source=firefox&amp;utm_medium=snippet&amp;utm_content=SelectAMT_test1#amount-10" target="_blank">Donate</a>

  <script type="text/javascript">
      //<![CDATA[
      (function() {
          var snippet = document.getElementById('mofo-eoy-fundraiser-4758');
          snippet.addEventListener('show_snippet', function() {
              (function () {

                var donationURL = 'https://sendto.mozilla.org/page/contribute/givenow-seq?ref=EOYFR2014&amp;utm_campaign=EOYFR2014&amp;utm_source=firefox&amp;utm_medium=snippet&amp;utm_content=SelectAMT_test1';
                var extraParams = 'snippet_name=' + snippet.parentNode.dataset.snippetId;
                if (donationURL.indexOf('?') !== -1) {
                    donationURL += '&' + extraParams;
                } else {
                    donationURL += '?' + extraParams;
                }

                // Element cache :

                var btnAmounts = snippet.querySelectorAll('.donation-amounts .button');
                var btnSelected = snippet.querySelector('.donation-amounts .button-selected');
                var btnDonate = snippet.querySelector('.donate-button');
                var elHighlighted = snippet.querySelector('em');

                // View functions

                function selectAmount(element) {
                  element.classList.add('button-selected');
                  btnSelected.classList.remove('button-selected');
                  btnSelected = element;
                  btnDonate.attributes['href'].value = (donationURL + '#amount-' + element.attributes['data-amount'].value).replace(/&amp;/g, '&');
                }

                // Event binding :

                for(var i=0; i<btnAmounts.length; i++) {
                  btnAmounts[i].addEventListener('click', function (event) {
                    if (!event.target.classList.contains('button-selected')) {
                      selectAmount(event.target);
                    }
                  });
                }

                btnDonate.addEventListener('click', function (event) {
                  btnDonate.blur();
                });

                // Fade in highlight on text
                setTimeout(function() {
                  if (elHighlighted) {
                    elHighlighted.classList.add('active');
                  }
                }, 1000);

              })();

          }, false);
      })();
      //]]>
  </script>
</div></div>
    <script type="text/javascript">
//<![CDATA[
/*!
  * $script.js Async loader & dependency manager
  * https://github.com/ded/script.js
  * (c) Dustin Diaz, Jacob Thornton 2011
  * License: MIT
  */
(function(a,b,c){typeof c["module"]!="undefined"&&c.module.exports?c.module.exports=b():typeof c["define"]!="undefined"&&c["define"]=="function"&&c.define.amd?define(a,b):c[a]=b()})("$script",function(){function p(a,b){for(var c=0,d=a.length;c<d;++c)if(!b(a[c]))return j;return 1}function q(a,b){p(a,function(a){return!b(a)})}function r(a,b,i){function o(a){return a.call?a():d[a]}function t(){if(!--n){d[m]=1,l&&l();for(var a in f)p(a.split("|"),o)&&!q(f[a],o)&&(f[a]=[])}}a=a[k]?a:[a];var j=b&&b.call,l=j?b:i,m=j?a.join(""):b,n=a.length;return setTimeout(function(){q(a,function(a){if(h[a])return m&&(e[m]=1),h[a]==2&&t();h[a]=1,m&&(e[m]=1),s(!c.test(a)&&g?g+a+".js":a,t)})},0),r}function s(c,d){var e=a.createElement("script"),f=j;e.onload=e.onerror=e[o]=function(){if(e[m]&&!/^c|loade/.test(e[m])||f)return;e.onload=e[o]=null,f=1,h[c]=2,d()},e.async=1,e.src=c,b.insertBefore(e,b.firstChild)}var a=document,b=a.getElementsByTagName("head")[0],c=/^https?:\/\//,d={},e={},f={},g,h={},i="string",j=!1,k="push",l="DOMContentLoaded",m="readyState",n="addEventListener",o="onreadystatechange";return!a[m]&&a[n]&&(a[n](l,function t(){a.removeEventListener(l,t,j),a[m]="complete"},j),a[m]="loading"),r.get=s,r.order=function(a,b,c){(function d(e){e=a.shift(),a.length?r(e,d):r(e,b,c)})()},r.path=function(a){g=a},r.ready=function(a,b,c){a=a[k]?a:[a];var e=[];return!q(a,function(a){d[a]||e[k](a)})&&p(a,function(a){return d[a]})?b():!function(a){f[a]=f[a]||[],f[a][k](b),c&&c(e)}(a.join("|")),r},r},this);

var SNIPPET_METRICS_SAMPLE_RATE = 0.1;

(function(showDefaultSnippets) {
    'use strict';

    var GEO_URL = 'https://geo.mozilla.org/country.js';
    var GEO_CACHE_DURATION = 1000 * 60 * 60 * 24 * 30; // 30 days

    // showDefaultSnippets polyfill, available in about:home v4
    if (typeof showDefaultSnippets !== 'function') {
        showDefaultSnippets = function() {
            localStorage.snippets = '';
            showSnippets();
        };
    }

    // gSnippetsMap polyfill, available in Firefox 22 and above.
    var gSnippetsMap = null;
    if (supportsLocalStorage()) {
        // localStorage is available, so we wrap it with gSnippetsMap.
        gSnippetsMap = {
            set: function(key, value) {
                localStorage[key] = value;
            },
            get: function(key) {
                return localStorage[key];
            }
        };
    } else {
        // localStorage isn't available, use gSnippetsMap (backed by IndexedDB).
        gSnippetsMap = window.gSnippetsMap;
    }

    var snippets = (document.getElementById('snippetContainer')
                    .getElementsByClassName('snippet'));
    var show_snippet = null;
    if (snippets.length > 0) {
        show_snippet = chooseSnippet(snippets);
    }

    if (show_snippet) {
        show_snippet.style.display = 'block';

        try {
            activateSnippetsButtonClick(show_snippet);
        } catch (err) {
            // Do nothing, most likely a newer version of Firefox w/o
            // activateSnippetsButtonClick
        }

        // Determine snippet ID.
        var metaParent = show_snippet.parentNode;
        while (metaParent && metaParent.classList &&
               !metaParent.classList.contains('snippet-metadata')) {
            metaParent = metaParent.parentNode;
        }

        var show_snippet_id = 'unknown';
        if (metaParent) {
            show_snippet_id = metaParent.dataset.snippetId || 'unknown';
        }
        document.getElementById('snippet_set').setAttribute('data-snippet-id', show_snippet_id);
        sendImpression();

        // Trigger show_snippet event on snippet node.
        var evt = document.createEvent('Event');
        evt.initEvent('show_snippet', true, true);
        show_snippet.dispatchEvent(evt);

        // Add sample rate and snippet ID to currently displayed links.
        var parameters = ('sample_rate=' + SNIPPET_METRICS_SAMPLE_RATE + '&snippet_name=' +
                          show_snippet_id);
        modifyLinks(show_snippet.getElementsByTagName('a'), parameters);
    } else {
        showDefaultSnippets();
    }

    // Update FxAccount Status
    updateFxAccountStatus();

    // Fetch user country if we don't have it.
    if (!haveUserCountry()) {
        downloadUserCountry();
    }

            // Choose which snippet to display to the user based on various factors,
    // such as which country they are in.
    function chooseSnippet(snippets) {
        // Build an object that maps countries to snippets.
        var snippetsFor = {};
        var countrySnippets = {};

        for (var k = 0; k < snippets.length; k++) {
            var snippet = snippets[k];
            var country = snippet.parentNode.dataset.country || 'none';

            // Create a new entry in the object if it doesn't exist.
            if (snippetsFor.hasOwnProperty(country)) {
                snippetsFor[country].push(snippet);
            } else {
                snippetsFor[country] = [snippet];
            }
        }

        // Choose a random snippet from the set of non-geolocated snippets,
        // including snippets for the user's country if it is available.
        var country = getUserCountry();
        if (country && snippetsFor.hasOwnProperty(country)) {
            countrySnippets = snippetsFor[country];
            if (snippetsFor.none) {
                countrySnippets = countrySnippets.concat(snippetsFor.none);
            }
        } else {
            countrySnippets = snippetsFor.none;
        }

        // FxAccount is already setup skip snippets that link to
        // about:accounts
        if (isFxAccountSetup()) {
            snippets = [];
            for (var k = 0; k < countrySnippets.length; k++) {
                var snippet = countrySnippets[k];
                if (!hasAboutAccountsLink(snippet)) {
                    snippets.push(snippet);
                }
            }
        } else {
            snippets = countrySnippets;
        }

        if (snippets && snippets.length) {
            var sum = 0;
            for (var k = 0; k < snippets.length; k++) {
                sum += parseInt(snippets[k].parentNode.dataset.weight, 10) || 100;
                snippets[k].parentNode.dataset.weight = sum;
            }
            var random_number = Math.random() * sum;
            for (var k = 0; k < snippets.length; k++) {
                if (random_number < snippets[k].parentNode.dataset.weight) {
                    return snippets[k];
                }
            }
        } else {
            return null;
        }
    }
    
    // Check whether snippet links to about:accounts.
    function hasAboutAccountsLink(snippet) {
        var links = snippet.getElementsByTagName('a')
        for (var i = 0; i < links.length; i++) {
            if (links[i].href.indexOf('about:accounts') === 0) {
                return true;
            }
        }
        return false;
    }

    function isFxAccountSetup() {
        var fxaccount = gSnippetsMap.get('fxaccount');
        if (fxaccount !== undefined) {
            return fxaccount;
        }
        // If fxaccount === undefined pretend that sync is already
        // setup, to avoid showing about:accounts snippets to browsers
        // that do not support mozUITour signal or have accounts
        // already setup.
        return true;
    }

    function updateFxAccountStatus() {
        var callback = function(result) {
            gSnippetsMap.set('fxaccount', result.setup);
        }
        var event = new CustomEvent(
            'mozUITour', {
                bubbles: true,
                detail: {
                    action:'getConfiguration',
                    data: {
                        configuration: 'sync',
                        callbackID: _waitForCallback(callback)
                    }
                }
            }
        );
        document.dispatchEvent(event);
    }

    // Check whether we have the user's country stored and if it is still valid.
    function haveUserCountry() {
        // Check if there's an existing country code to use.
        if (gSnippetsMap.get('geoCountry')) {
            // Make sure we have a valid lastUpdated date.
            var lastUpdated = Date.parse(gSnippetsMap.get('geoLastUpdated'));
            if (lastUpdated) {
                // Make sure that it is past the lastUpdated date.
                var now = new Date();
                if (now < lastUpdated + GEO_CACHE_DURATION) {
                    return true;
                }
            }
        }

        return false;
    }

    function getUserCountry() {
        if (haveUserCountry()) {
            return gSnippetsMap.get('geoCountry').toLowerCase();
        } else {
            return null;
        }
    }

    // Download the user's country using the geolocation service.
    function downloadUserCountry() {
        $script(GEO_URL, 'geo');
        $script.ready('geo', function() {
            try {
                gSnippetsMap.set('geoCountry', geoip_country_code());
                gSnippetsMap.set('geoLastUpdated', new Date());
            } catch (e) {
                // Most likely failed to load JS file. Continue on without us,
                // we'll try again next time.
            }
        });
    }

    // Notifies stats server that the given snippet ID
    // was shown. No personally-identifiable information
    // is sent.
    function sendImpression() {
        sendMetric('impression');
    }

    // Modifies the given links to include the specified GET parameters.
    function modifyLinks(links, parameters) {
        for (var k = 0, len = links.length; k < len; k++) {
            var link = links[k];
            var delimeter = (link.href.indexOf('?') !== -1 ? '&' : '?');

            // Pull the fragment off of the link
            var fragment_position = link.href.indexOf('#');
            if (fragment_position === -1) {
                fragment_position = link.href.length;
            }

            var href = link.href.substring(0, fragment_position);
            var fragment = link.href.substring(fragment_position);

            link.href = href + delimeter + parameters + fragment;
        }
    }

    // Check for localStorage support. Copied from Modernizr.
    function supportsLocalStorage() {
        var s = 'snippets-test';
        try {
            localStorage.setItem(s, s);
            localStorage.removeItem(s);
            return true;
        } catch(e) {
            return false;
        }
    }

    // Listen for clicks on links that point to 'about:accounts' and
    // convert them showFirefoxAccounts Events.
    document.addEventListener('click', function(event) {
        var target = event.target;
        while (target && target.tagName && target.tagName.toLowerCase() !== 'a') {
            target = target.parentNode;
        }
        if (target && target.href && target.href.indexOf('about:accounts') === 0) {
            var event = new CustomEvent(
                'mozUITour',
                { bubbles: true, detail: { action:'showFirefoxAccounts', data: {}}}
            );
            document.dispatchEvent(event);
        }
    }, false);

    // UITour Helper. Exact copy from
    // https://raw.githubusercontent.com/Unfocused/mozilla-uitour/master/src/mozilla-uitour.js
    function _generateCallbackID() {
        return Math.random().toString(36).replace(/[^a-z]+/g, '');
    }

    // UITour Helper. Exact copy from
    // https://raw.githubusercontent.com/Unfocused/mozilla-uitour/master/src/mozilla-uitour.js
    function _waitForCallback(callback) {
        var id = _generateCallbackID();

        function listener(event) {
            if (typeof event.detail != "object")
                return;
            if (event.detail.callbackID != id)
                return;

            document.removeEventListener("mozUITourResponse", listener);
            callback(event.detail.data);
        }
        document.addEventListener("mozUITourResponse", listener);

        return id;
    }

})(window.showDefaultSnippets);

// Send impressions and other interactions to the service
// If no parameter is entered, quit function
function sendMetric(metric) {
    if (Math.random() > SNIPPET_METRICS_SAMPLE_RATE) {
        return;
    }

    if (!metric) {
        return;
    }

    var STATS_URL = 'https://snippets-stats.mozilla.org/foo.html';
    var snippet_set = document.getElementById('snippet_set');
    var locale = snippet_set.getAttribute('data-locale');
    var snippet_id = snippet_set.getAttribute('data-snippet-id');
    var url = STATS_URL + '?snippet_name=' + snippet_id + '&locale=' + locale + '&metric=' + metric;
    var r = new XMLHttpRequest();
    r.open('GET', url);
    r.send();
}
//]]>
</script></div>